@host = https://localhost:7012

### 0Ô∏è‚É£ Token Al (WEB MODU - HttpOnly Cookie Testi)
# Token JSON olarak d√∂nmez, tarayƒ±cƒ± (veya Rider) bunu kilitli Cookie olarak saklar.
GET {{host}}/api/Token
X-Client-Token: super-secret-client-token-123
X-Client-Platform: web

### 1Ô∏è‚É£ Token Al (MOBƒ∞L MODU - JSON Token Testi)
# Otomasyon testlerimizin √ßalƒ±≈ümasƒ± i√ßin JSON d√∂nen mobil modu kullanƒ±yoruz, 
# b√∂ylece token'ƒ± deƒüi≈ükene alƒ±p alttaki Bearer kƒ±sƒ±mlarƒ±na yerle≈ütirebiliyoruz.
GET {{host}}/api/Token
X-Client-Token: super-secret-client-token-123
X-Client-Platform: mobile

> {% client.global.set("token", response.body.token); %}

### 2Ô∏è‚É£ G√∂rsel Upload (ID'yi Hafƒ±zaya Alƒ±r)
POST {{host}}/api/Analysis/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

> {% client.global.set("analysisId", response.body.analysisId); %}

### 3Ô∏è‚É£ Analiz Sonucunu Sorgulama (202 Processing Testi)
GET {{host}}/api/Analysis/result/{{analysisId}}
Authorization: Bearer {{token}}

### 4Ô∏è‚É£ Ge√ßmi≈ü Analizleri Listeleme 
GET {{host}}/api/Analysis/history?page=1&pageSize=5
Authorization: Bearer {{token}}

### 5Ô∏è‚É£ üö® HACKER TESTƒ∞ (Magic Numbers)
# Kalkan (Rate Limit) dolmadan √∂nce bunu test ediyoruz ki 
# 429 deƒüil, 400 (Ge√ßersiz dosya imzasƒ±) hatasƒ± versin!
POST {{host}}/api/Analysis/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="sahte.jpg"
Content-Type: image/jpeg

< ./sahte.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### üö® RATE LIMIT (HIZ SINIRI) ZORLAMA TESTƒ∞ üö®
# Sƒ±nƒ±r dakikada 5. ≈ûu ana kadar 2 ba≈üarƒ±lƒ± Upload denemesi yaptƒ±k (1 Ger√ßek, 1 Sahte). 
# Toplam 5'i ge√ßmek i√ßin arka arkaya 4 istek daha atƒ±p kalkanƒ± patlatacaƒüƒ±z!

### Spam 1
POST {{host}}/api/Analysis/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Spam 2
POST {{host}}/api/Analysis/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Spam 3
POST {{host}}/api/Analysis/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Spam 4 (BURASI 429 TOO MANY REQUESTS HATASI VERMELƒ∞!)
POST {{host}}/api/Analysis/upload
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test.jpeg"
Content-Type: image/jpeg

< ./test.jpeg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### üõ°Ô∏è KALKAN DOƒûRULAMA TESTƒ∞
# Upload yasaklandƒ± (429 veriyor) ama History (Ge√ßmi≈ü) sorunsuz √ßalƒ±≈ümaya devam etmeli! (200 OK)
GET {{host}}/api/Analysis/history?page=1&pageSize=5
Authorization: Bearer {{token}}